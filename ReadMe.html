<html>
  <head>
    <title>extended Events by BlueTeck - ReadMe</title>
    <style>
       <!--
        html,body {
          background-color:#020202;
        }

        a:link, a:visited {
          color: #444444;
          text-decoration:none;
          font-weight:bold;
        }

        a:active, a:hover {
          color: #000000;
        }

        td.contentHead {
          width: 100%;
          margin:10px 0 0 7px;
          padding:0;
          text-align:left;
          font-size:20px;
          color:#333;
          border-bottom:1px dotted #333;
          font-weight:normal;
        }

        td.content {
          font-size:13px;
          color:#333;
          margin:9px 0 8px 9px;
          padding:0;
        }
								
								p.codesearch,p.codepast {
          border:1px solid #DDD;
          background-color:#F2F2F2;
          width: 750px;
          padding:5px 5px;
          font-family:"Courier New", Courier, monospace;
          font-size:10px;         
          margin: 0px;  
        }

        p.codepast {
          border:1px solid #DDD;
          background-color:#c8f7b5;
        }        
        
        textarea {
          width: 750px;
          overflow: auto;          
        } 
		
		td.datei {
          border: 1px double #000000;
          cursor: pointer;
          font-weight: bold;
          background-color:#F2F2F2;
          width: 750px;
          padding:5px 5px;
          font-family: "Courier New", Courier, monospace;
          font-size:14px;          
        }
       -->
    </style>
    <script type="text/javascript">
      function show(Id) {
        var showText = document.getElementById('show'+Id);
        var showBild = document.getElementById('img'+Id);
        var Minus="http://images.dzcp-zone.de/readmes/minus.gif", Plus="http://images.dzcp-zone.de/readmes/plus.gif";
        if (showText.style.display == 'none') {
          showText.style.display = '';
          showBild.src = Minus;
        } else {
          showText.style.display = 'none';
          showBild.src = Plus;
        }
      }
    </script> 
  </head>

  <body style="text-align:center">
    <table width="800" style="border: 2px solid #ccc;" align="center" bgcolor="white" cellspacing="10" cellpadding="0">

<!--############################################################################-->
<!--################################   START   #################################-->
<!--############################################################################-->
      <tr>
        <td class="contentHead">extended Events AddOn by <a href="http://www.modsbar.de/?ref=ef4b56d946bdb5cc77d790da648b3004">BlueTeck</a> - ReadMe</td>
      </tr>
      <tr>
        <td class="content"><p>Mit diesem AddOn bringt erweitert ihr euren Kalender, hier eine kleine &Uuml;bersicht der Funktionen:</p>
          <ul>
            <li>Kategorien f�r Termine</li>
            <li>Detaillierte Angaben zu Terminen</li>
            <li>User k&oouml;nnen zusagen/absagen</li>
            <li>Termine k&oouml;nnen kommentiert werden</li>
          </ul>
        <p>Bei Problemen, Fehlern, Anregungen oder Fragen, wendet euch gerne an mich.</p></td>
      </tr>

<!--############################################################################-->
<!--####################   HAFTUNGSAUSSCHLUSS & COPYRIGHT   ####################-->
<!--############################################################################-->
     <tr>
        <td class="contentHead">Copyright & Haftungsausschluss</td>
      </tr>
      <tr>
        <td class="content">          Wir &uuml;bernehmen keinerlei Verantwortung, f&uuml;r Sch&auml;den die durch das einbinden der Mod/des Addons entstehen. Das einbinden und
          nutzen erfolgt demnach auf eigene Gefahr.<br>
          <br>
          Vor den einbinden der Mod/des Addons sollte eine Datenbanksicherung durchgef&uuml;hrt werden.
        </td>
      </tr>


<!--############################################################################-->
<!--#############################   INSTALLATION   #############################-->
<!--############################################################################-->
      <tr>
        <td class="contentHead">Installation</td>
      </tr>     
      <tr>
        <td class="content">
          Entpackt das Archiv in einen beliebigen Ordner. Wenn Ihr es entpackt habt, findet Ihr in den entpackten Ordner 4 weitere Ordner
          (vorhanden, _install, PHP und Template).<br>
          <br>
          
          Damit es zu keinen Fehler kommt, m&uuml;ssen zuerst die Tabellen in der Datenbank angelegt werden. Hierf&uuml;r habe ich einen kleinen
          Installer geschrieben, welchen sich im Ordner _install befindet. Ladet diesen Ordner in das Hauptverzeichnis eures deV!L'z Clanportals.<br>
          <br>
          
          <b>Ruft anschliesend eure Seite auf</b> und <b>f&uuml;gt hinter die Adresse folgendes ein</b>:<br>
          <br>
          
          <p class="codepast">/_install/install.php</p>
          <p><br>
          Wenn die Installation erfolgreich verlief <b>l&ouml;scht zur Sicherheit den Installer-Ordner</b> von euren Webspace.<br>
          </p>
          <p>
          Nun m&uuml;ssen die restlichen Dateien hochgeladen werden. Den <b>Inhalt aus dem "PHP Ordner" </b> m&uuml;sst Ihr in
          das <b>Hauptverzeichnis des deV!L'z Clanportal</b> hochladen. Das Hauptverzeichnis ist das
          oberste Verzeichnis des deV!L'z Clanportals in welchen sich unter anderen die Dateien __readme.html, antispam.php, index.php,
          popup.html und die ganzen Ordner der einzelnen Bereiche befinden.<br>
          <br>
          
          Den <b>Inhalt des "Templates" Ordner</b> m&uuml;sst Ihr in das <b>Verzeichnis eures Templates</b> hochladen
          (Pfad: inc/_templates_/TEMPLATE).<br>
          </p>

		  
          <p>In dem Ordner vorhanden, sind Dateien enthalten, die du schon besitzt, wenn du noch keine &Auml;nderungen in diesen Dateien gemacht hast, 
		  kannst du sie einfach �berschreiben. Andernsfalls musst du die wie folgt anpassen:</p></td>
      </tr>
	    
	  <tr>
        <td class="datei" id="kal" onClick="show(1)"><img src="http://images.dzcp-zone.de/readmes/plus.gif" id="img1">inc/menu-functions/kalender.php</td>
      </tr>
      <tr id="show1" style="display: none;">
        <td class="content">
          <b>Sucht</b> nach:
          <p class="codesearch">
            <textarea rows="10" wrap="off" readonly>global $db,</textarea></p><br>
          <b>F&uuml;gt</b> direkt <b>hinter</b> dieser Zeile folgendes ein:
          <p class="codepast">
            <textarea rows="10" wrap="off">$sql_prefix,</textarea></p><br> 
			Sucht nach:
			<p class="codesearch">
            <textarea rows="10" wrap="off" readonly>$qry = db("SELECT datum,title FROM ".$db['events']." WHERE DATE_FORMAT(FROM_UNIXTIME(datum), '%d.%m.%Y') = '".cal($i).".".$monat.".".$jahr."'");</textarea></p><br>
          
		  bis <p class="codesearch">
            <textarea rows="10" wrap="off" readonly>} else {
            $event = "";
            $titleev = "";
          }</textarea></p><br>
          
		  und ersetzt es durch:
          <p class="codepast">
            <textarea rows="10" wrap="off">          $qry = db("SELECT s1.*, s2.name as katname FROM ".$sql_prefix."events_info as s1 JOIN ".$sql_prefix."events_kat as s2
                   WHERE s1.kat = s2.id AND DATE_FORMAT(FROM_UNIXTIME(start), '%d.%m.%Y') <= '".cal($i).".".$monat.".".$jahr."' AND DATE_FORMAT(FROM_UNIXTIME(ende), '%d.%m.%Y') >= '".cal($i).".".$monat.".".$jahr."' AND s1.show = 1");
        
		  if(_rows($qry))
          {
            while($get = _fetch($qry))
            {
			
			 
			$pfadbild = "inc/images/eventkat/".$get['kat'];
			if(file_exists(basePath."/".$pfadbild.".gif"))     $bild = '<img src=../'.$pfadbild.'.gif class=icon  alt= />';		
			elseif(file_exists(basePath."/".$pfadbild.".jpg")) $bild = '<img src=../'.$pfadbild.'.jpg class=icon  alt= />';		
			elseif(file_exists(basePath."/".$pfadbild.".png")) $bild = '<img src=../'.$pfadbild.'.png class=icon  alt= />';	
			else $bild = "<img src=../inc/images/event.gif class=icon alt= />";  
			
              $event = "set";
              $titleev .= '<tr><td>'.$bild.jsconvert(re($get['katname']).': '.re($get['name'])).'</td></tr>';
            }</textarea></p><br> 
      </tr> 
	  	  <tr>
        <td class="datei" id="ev" onClick="show(2)"><img src="http://images.dzcp-zone.de/readmes/plus.gif" id="img2">inc/menu-functions/events.php</td>
      </tr>
      <tr id="show2" style="display: none;">
        <td class="content">
          Diese Datei ist so klein, die k�nnt ihr ersetzten, oder einmal die paar Zeilen vergleichen mit dem hier:
          <p class="codepast">
            <textarea rows="10" wrap="off">
			<?php
function events()
{
  global $db,$sql_prefix;

 $qry = db("SELECT id, name, start FROM ".$sql_prefix."events_info
              WHERE (`start` >= ".time()." OR (`start` <= ".time()." AND `ende` >= ".time().")) AND `show` = 1
              ORDER BY `start`
              LIMIT ".config('m_events')."");
   while($get = _fetch($qry))
   {
     $events = show(_ev_next_event_link, array("datum" => date("d.m.",$get['start']),
                                            "id" => $get['id'],
                                            "event" => $get['name']));

  	 $eventbox .= show("menu/event", array("events" => $events));
   }

   return empty($eventbox) ? '<center style="margin:2px 0">'._no_events.'</center>' : '<table class="navContent" cellspacing="0">'.$eventbox.'</table>';;
}
?>

			</textarea></p><br> 
      </tr> 
	  	  <tr>
        <td class="datei" id="user" onClick="show(3)"><img src="http://images.dzcp-zone.de/readmes/plus.gif" id="img1">user/case_userlobby.php</td>
      </tr>
      <tr id="show3" style="display: none;">
        <td class="content">
          <b>Sucht</b> nach:
          <p class="codesearch">
            <textarea rows="10" wrap="off" readonly>/** Kalender Events anzeigen */</textarea></p><br>
          l&ouml;scht nun die folgenden Zeilen bis:
		  <p class="codesearch">
            <textarea rows="10" wrap="off" readonly>/** Neue Awards anzeigen */</textarea></p><br>
			und f&uuml;gt stattdessen dies ein:
          <p class="codepast">
            <textarea rows="10" wrap="off">    $qrykal = db("SELECT count(id) as num, start, ende FROM ".$sql_prefix."events_info
                  WHERE (`start` >= ".time()." OR (`start` <= ".time()." AND `ende` >= ".time().")) AND `show` = 1
                  GROUP BY id ORDER BY start LIMIT 1");
 
    $getkal = _fetch($qrykal);
if($getkal['num'] != 0) {
      if(date("d.m.Y H:i",$getkal['start']) <= date("d.m.Y H:i", time()) AND date("d.m.Y H:i",$getkal['ende']) >= date("d.m.Y H:i", time()))
      {
        $nextkal = show(_ev_userlobby_kal_now, array("time" => mktime(0,0,0,date("m",$getkal['start']),
                                                              date("d",$getkal['start']),date("Y",$getkal['start']))));
	  } 
	  elseif(date("d.m.Y",$getkal['start']) == date("d.m.Y", time()) AND date("d.m.Y H:i",$getkal['start']) >= date("d.m.Y H:i", time()))
	  {
              $nextkal = show(_ev_userlobby_kal_today, array("time" => mktime(0,0,0,date("m",$getkal['start']),
                                                              date("d",$getkal['start']),date("Y",$getkal['start']))));
	  }	  
       else {
        $nextkal = show(_ev_userlobby_kal_not_today, array("time" => mktime(0,0,0,date("m",$getkal['start']),
                                                                  date("d",$getkal['start']),date("Y",$getkal['start'])),
                                                        "date" => date("d.m.Y", $getkal['start'])));
      }
} else {
$nextkal = _no_events;
}</textarea></p><br> 
      </tr> 
	 	  <tr>
        <td class="datei" id="kalin" onClick="show(4)"><img src="http://images.dzcp-zone.de/readmes/plus.gif" id="img4">kalender/index.php</td>
      </tr>
      <tr id="show4" style="display: none;">
        <td class="content">
          <b>Sucht</b> nach:
          <p class="codesearch">
            <textarea rows="10" wrap="off" readonly>        $qry = db("SELECT datum,title FROM ".$db['events']."
                   WHERE DATE_FORMAT(FROM_UNIXTIME(datum), '%d.%m.%Y') = '".cal($i).".".$monat.".".$jahr."'");
        if(_rows($qry))
        {
          while($get = _fetch($qry)) $infoEvent .= '<img src=../inc/images/event.gif class=icon alt= /> '.jsconvert(_kal_event.re($get['title']));
          
         $info = ' onmouseover="DZCP.showInfo(\'<tr><td>'.$infoEvent.'</td></tr>\')" onmouseout="DZCP.hideInfo()"';
          $event = '<a href="?action=show&amp;time='.$datum.'"'.$info.'><img src="../inc/images/event.gif" alt="" /></a>';
        } else {
          $event = "";
        }</textarea></p><br>
          und ersetzt es durch:
          <p class="codepast">
            <textarea rows="10" wrap="off">$qry = db("SELECT s1.*, s2.name as katname FROM ".$sql_prefix."events_info as s1 JOIN ".$sql_prefix."events_kat as s2
                   WHERE s1.show = 1 AND s1.kat = s2.id AND DATE_FORMAT(FROM_UNIXTIME(start), '%d.%m.%Y') <= '".cal($i).".".$monat.".".$jahr."' AND DATE_FORMAT(FROM_UNIXTIME(ende), '%d.%m.%Y') >= '".cal($i).".".$monat.".".$jahr."'");
        if(_rows($qry))
        {
          while($get = _fetch($qry)) 
		  {
 
			$pfadbild = "inc/images/eventkat/".$get['kat'];
			if(file_exists(basePath."/".$pfadbild.".gif"))     $bild = '<img src=../'.$pfadbild.'.gif class=icon  alt= />';		
			elseif(file_exists(basePath."/".$pfadbild.".jpg")) $bild = '<img src=../'.$pfadbild.'.jpg class=icon  alt= />';		
			elseif(file_exists(basePath."/".$pfadbild.".png")) $bild = '<img src=../'.$pfadbild.'.png class=icon  alt= />';	
			else $bild = "<img src=../inc/images/event.gif class=icon alt= />";  

		  $infoEvent .= $bild.jsconvert(re($get['katname']).': '.re($get['name'])).'<br>';
		  }
          
          $info = ' onmouseover="DZCP.showInfo(\'<tr><td>'.$infoEvent.'</td></tr>\')" onmouseout="DZCP.hideInfo()"';
          $event = '<a href="../event/?action=list&amp;time='.$datum.'"'.$info.'><img src="../inc/images/event.gif" alt="" /></a>';
        } else {
          $event = "";
        }</textarea></p><br> 
      </tr> 
	  <tr>
        <td class="content">
		Nun l�scht ihr noch /admin/menu/kalender.php und /admin/menu/kalender.gif.
		
		Und wenn ich jetzt ncihts vergessen habe und ihr alles richtig gemacht habt, sollte alles funktionerien.
	  </td>
      <tr>
        <td height="10"></td>
      </tr>
    </table>
  </body>
</html>
